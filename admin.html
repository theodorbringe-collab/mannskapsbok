<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mannskapsbok – Admin</title>
  <link rel="stylesheet" href="./assets/styles.css?v=3">
  <!-- (resten av din CSS/HTML kan stå som før) -->
</head>
<body>
  <!-- … din eksisterende body … -->

<script type="module">
import {
  sb, ROLES,
  ensureUser, ensureLocalUser,
  listUsers, loadCatalog, loadProgressFor, loadComments, loadLogs,
  upsertProgress, addComment,
  addSection, updateSectionTitle, moveSection, deleteSection,
  addItem, editItem, deleteItem, moveItem
} from "./assets/common.js?v=3";

/* Hvis ensureUser feiler, faller vi tilbake til local */
let me=null;
try { me = await ensureUser(); }
catch(e){
  console.warn("ensureUser feilet, bruker lokal elev:", e?.message||e);
  me = await ensureLocalUser();
}

/* … resten av din admin.js-kode uendret … */
</script>
</body>
</html>
